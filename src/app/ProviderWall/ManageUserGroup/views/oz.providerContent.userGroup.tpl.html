



<div style="border: 1px solid #EEE8E8; border-radius:6px; padding:10px;" class = 'container'>
    <div id="tabs">
        <ul id="tabPrice" class=" policyTab nav nav-pills" ng-init="tabForOrders.approval = true;
          tabForOrders.processing = false; tabForOrders.delivery = false;" >
          <li class="tabPolicyLi" ng-class="{active3 : manageMembers === 1}" >
            <a  class="prodo-cursor" id="prodoCommentTab" ng-click="
         switchToManageMembers()">
                Manage Groups
            </a>
          </li>

          <li class="tabPolicyLi" ng-class="{active3 : manageMembers === 0}"  >
            <a id="prodoCommentSearchTab" class="prodo-cursor" ng-click="
          tabForOrders.processing = true; switchToManageGroups()" >
               Manage Group Members
             </a>
          </li>
        </ul>
    </div>


    <div ng-if = 'manageMembers === 1'>
      <div style = 'height : 45px;'> 
        <button style="margin-bottom:10px; float:right;" class = 'btn btn-info btn-sm' style = 'float : right; '  ng-click="openAddGroup()" >Add New User Group </button>
      </div>

        <div collapse="isCollapsed">
          <table class = 'table table-hover' style= 'border: 1px solid #ccc;width:80%; margin-left:10.5%; margin-right:12.5%'>
              <tr>
                  <td style = 'width:20%'>
                      <h5> Group Name : </h5>
                  </td>

                  <td style = 'width:80%'>
                      <input type = 'text' class = 'form-control' ng-model = 'contentOfGroup.groupdata.grpname'>
                      <div class="error-message prodo-product-Invalid" ng-if="errorForEmptyName!==''" ng-bind="errorForEmptyName"></div>
                  </td>
              </tr>

              <tr>
                  <td>
                      <h5> Group Description : </h5>
                  </td>

                  <td>
                      <textarea class = 'form-control' ng-model = 'contentOfGroup.groupdata.description' style = 'resize: none;'></textarea>
                      <div class="error-message prodo-product-Invalid" ng-if="errorForEmptyDescription!==''" ng-bind="errorForEmptyDescription"></div>
                  </td>
              </tr>
              <tr>
                  <td>
                  </td>
                  <td> 
                      <div > <button class = 'btn btn-info' ng-click = 'addGroupContent()' style = "float : right;width : 10%">Save</button></div>
                        <div > <button class = 'btn btn-info' ng-click = 'openAddGroup()' style = "float : right; width : 10%;margin-right : 5px;">Cancel</button></div>
                  </td>
          </table>
       </div>
    
    <div>
        <table class = 'table ' ng-if = 'allGrpContents.length !== 0'>
            <tr style="border: 1px solid #EEE8E8; ">
                <th style = "width : 15%">Group Name</th>
                <th style = "width : 35%">Group Description</th>
                <th style = "width : 30%"> Group Members </th>
                <th style = "width : 20%"> </th>
            </tr>

            <tr ng-repeat = 'grps in allGrpContents' ng-if = 'allGrpContents.length !== 0'>
                <td ng-bind = 'grps.grpname' ng-hide = 'grps.editing'></td>
                <td ng-show = 'grps.editing'><input type = 'text' class = 'form-control' ng-model = 'grps.grpname'></td>
                <td ng-hide = 'grps.editing'><div ng-bind = 'grps.description' style = 'width: 200px;min-height : 10px;word-wrap: break-word;'></div></td>
                <td ng-show = 'grps.editing'><input type = 'text' class = 'form-control' ng-model = 'grps.description'></td>
                <td>
                    <table class = 'table table-hover' ng-if = 'grps.grpmembers.length>0'>
                        <tr>
                            <th style = 'width : 50%;border-top: 0px;border-bottom: 1px solid #ddd;'>Mobile No.</th>
                            <th style = 'border-top: 0px;border-bottom: 1px solid #ddd;'>Email</th>
                        </tr>
                        <tr ng-repeat = 'members in grps.grpmembers' style = 'border-top: 0px'>
                            <td ng-bind = 'members.mobileno' style = 'border-top: 0px'></td>
                            <td ng-bind = 'members.email' style = 'border-top: 0px'></td>
                        </tr>
                    </table>
                </td>
                <td ng-hide = 'grps.editing'>

                    <button class = 'btn-primary btn-sm' ng-click = 'edit(grps)' style = 'width: 60px;height : 30px;float : right;margin-right : 5px'> Edit&nbsp; </button>
                   
                    <button class = 'btn-warning btn-sm'  ng-click = 'assignGroupId(grps.groupid)' style = 'width: 60px;height : 30px;float : right; margin-right : 5px' data-toggle = 'modal' data-target = '#romoveGrp'>Delete</button> 

                </td>
        
                <td ng-show = 'grps.editing'>
                          
                    <button class = 'btn-primary btn-sm' ng-click = 'editGroupContents(grps)' style = 'width: 60px;height : 30px;float : right;margin-right : 5px'> Save&nbsp; </button>
                   
                    <button class = 'btn-info btn-sm'  ng-click = 'stop(grps)' style = 'width: 60px;height : 30px;float : right; margin-right : 5px' >Cancel</button> 
                </td>
            </tr>
     
        </table>
        <div style="padding: 10px;" ng-if = 'allGrpContents.length === 0'>
          <div style="padding:40px; opacity: .8;margin-top: 2px;margin-bottom: 1px; color: rgb(80, 74, 74);background-color:#F1F1F1; letter-spacing: 1px; margin:0px; margin-top :28px" class="row">
            <div class="col-md-12">
              <div class="no-message">
                <center>
                  <p style="font-size: 14px; font-weight:bold;">No group exists for your branch.</p>      
                  <p style="font-size: 12px;">You can add, edit and manage user groups and other group related details will be shown here.</p>
                </center>
              </div>
            </div>
          </div>
        </div>
    </div>

 </div>

<div ng-if = 'manageMembers === 0'>
       <div style = 'width : 100%;height : 40px'>
             <select  class=" form-control" ng-options="grp.groupid as grp.grpname for grp in allGrpContents" ng-model="idOfSelectedGroup"  style = 'width: 40%; float : right;margin-bottom : 10px;' ng-change = 'assignGrpId(idOfSelectedGroup)'></select>
              <h5  style = 'float : right;margin-bottom : 10px;'> Please select group : &nbsp; &nbsp; &nbsp; &nbsp;</h5>
        </div>
        <br>
       <div style = 'border : 1px solid #ddd;padding : 4px;'>
          <div style = 'width : 100%;height : 38px;'>
                  <button class = 'btn btn-default' ng-click = 'addUserInvites()' style = 'float:right'> <i class="fa fa-plus-square" > </i>&nbsp;Add More</button>
          </div>

            <form name="form.userinvitesform" ng-submit='' novalidate>  
               <table class = 'table table-hover'>
                 <tr>
                    <th style = 'width : 45%'> Email Id : </th>
                    <th style = 'width : 45%'>Mobile No : </th> 
                    <th style = 'width : 10%'></th>
         
                 </tr>
                 <tr ng-repeat="userinvite in userinvites">

                      <td width="45%">
                              <input class="form-control" ng-model="userinvite.email" type="text" name="name" placeholder="eg: example@gmail.com" >
                               <p ng-show="array[$index].email === 1" class="text-danger"><small>Please check this email id</small></p>
                      </td>

                      <td width="45%">
                              <input class="form-control" ng-model="userinvite.mobileno" name="text" type="text" placeholder="eg:9XXXXXXXXX" >
                               <p ng-show="array[$index].mobileno === 1" class="text-danger"><small>Please check this mobile number</small></p>
                      </td>

                      <td width="10%">
                              <button class="prodo-account-btn btn btn-danger btn-sm" ng-click='removeInvites($index)'><i class="prodo-fa fa fa-times"></i>&nbsp;&nbsp;Remove</button>
                      </td>
                  </tr>

               </table>
              </form>

         <p ng-show="userinvites.length > 0" class="text-danger"><small>{{invitesettingchange}}</small></p>
 
      <!--        <button class="prodo-account-invites-btn btn btn-info btn-sm" ng-click="addUserInvites()"><i class="prodo-fa fa fa-plus-square"></i>Add More Users</button>
        
        <form name="form.userinvitesform" ng-submit='' novalidate>
          <table class="table table-condensed">
            <tbody>
            
              <tr ng-repeat="userinvite in userinvites">
                <td width="45%"><input class="form-control" ng-model="userinvite.name" type="text" name="name" placeholder="name" required><small ng-show="((form.userinvitesform.name.$dirty && form.userinvitesform.name.$invalid) || (form.userinvitesform.name.$invalid && form.userinvitesform.submitted))">*Name is required!</small> </td>
                <td width="45%"><input class="form-control" ng-model="userinvite.email" name="email" type="email" placeholder="example@gmail.com" required><small ng-show="((form.userinvitesform.email.$dirty && form.userinvitesform.email.$invalid) || (form.userinvitesform.email.$invalid && form.userinvitesform.submitted))">*Enter valid email!</small> </td>
                <td width="10%"><button class="prodo-account-btn btn btn-danger btn-sm" ng-click='removeInvites(userinvite)'><i class="prodo-fa fa fa-times"></i>remove</button></td>
              </tr>
              <br>
              <p ng-show="userinvites.length > 0" class="text-danger"><small>{{invitesettingchange}}</small></p>
            </tbody>
          </table>
          <button ng-show="userinvites.length > 0" class="prodo-account-btn btn btn-primary btn-sm pull-right" ng-click='sendUserInvites()'><i class="prodo-fa fa fa-share"></i>Send</button>
        </form> -->





 

 
        <div style = 'margin-bottom : 40px;height : 5px'> <button class = 'btn btn-info' style = 'float:right' ng-click = 'addMemberToTheGroup()'>Add To Group</button> </div>
    </div>

      <table class = 'table ' ng-repeat = 'list in allGrpContents | filter : grpnameContent' ng-if = 'allGrpContents.length !== 0 && idOfSelectedGroup !== "" ' style = 'margin-top : 38px;'>
          <tr>
              <th style = 'width : 30%'> Group name </th>
              <th style = 'width: 70%'> Group members </th>
          </tr>

          <tr ng-if = 'allGrpContents.length !== 0'>
              <td ng-bind = 'list.grpname'></td>
              <td >
                  <table class = 'table ' ng-if = 'list.grpmembers'>
     <!--                  <tr>
                          <th style = 'width : 30%;'> Mobile No </th>
                          <th style = 'width : 40%;'>Email Id </th>
                          <th style ='width : 30%;'>Action
                          </th>
                      </tr> -->
                      <tr ng-repeat = 'member in list.grpmembers'>
                          <td  style = 'border-top: 0px;'>Mobile : <span ng-bind = 'member.mobileno'></span></td>
                          <td style = 'border-top: 0px;' ng-hide = 'member.email === ""'>Email : <span ng-bind = 'member.email'></span></td>
                          <td style = 'border-top: 0px;float:right'> 

                              <button class = 'btn-warning' ng-click = 'removeMemberGroup(member.userid)' style = 'height : 32px; width : 70px; border-radius : 5px'> Remove </button>
                          </td>
                      </tr>
                  </table>
               <!--    <div ng-repeat = 'members in activeGroupContent.grpmembers'> 
                      <div style = 'width : 30%; float:right'> <button class = 'btn btn-alert'> Remove </button></div>
                      <div style = 'width : 40%; float : right;'><span ng-bind = 'member.email'></span></div>
                      <div style ='width : 30%; float : right'><span ng-bind = 'member.mobileno'></span></div>
                  </div> -->
              </td>
          </tr>
      </table>



      </div>

          <div id = "romoveGrp" class="modal fade" style="">     
            <div class="modal-dialog">
                <div class="modal-content">
                  <div>
                    <h4 align="center">Delete Group</h4>   
                   <hr>      
                  </div>  
              
                  <div class="modalAppearance">
                           &nbsp;&nbsp;&nbsp;&nbsp;Are you sure you want to delete this group
                  </div>                                                                                                 
                  <div class="modal-footer">
                     <button class="btn btn-info" style="background-color:#ACB2B4;border-color:#ACB2B4;" data-dismiss="modal">Cancel</button>     
                     <button type="button" class="btn btn-info" id="final" data-dismiss="modal" ng-click = 'deleteCurrentGrp(groupId)'><b>Delete</b></button>   
                  </div>                                       
                 </div>
              </div>
           </div> 


</div>
